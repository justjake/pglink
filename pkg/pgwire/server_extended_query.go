// Code generated by generate.go; DO NOT EDIT.

package pgwire

import (
	"fmt"

	"github.com/jackc/pgx/v5/pgproto3"
)

// ServerExtendedQuery is implemented by all Server ExtendedQuery message wrapper types.
type ServerExtendedQuery interface {
	ExtendedQuery()
	PgwireMessage() pgproto3.Message
	Server() pgproto3.BackendMessage
}

// Compile-time checks that all wrapper types implement the interface.
var (
	_ ServerExtendedQuery = ServerExtendedQueryParseComplete{}
	_ ServerExtendedQuery = ServerExtendedQueryBindComplete{}
	_ ServerExtendedQuery = ServerExtendedQueryParameterDescription{}
	_ ServerExtendedQuery = ServerExtendedQueryRowDescription{}
	_ ServerExtendedQuery = ServerExtendedQueryNoData{}
	_ ServerExtendedQuery = ServerExtendedQueryPortalSuspended{}
	_ ServerExtendedQuery = ServerExtendedQueryCloseComplete{}
)

// Response to Parse.
type ServerExtendedQueryParseComplete FromServer[*pgproto3.ParseComplete]

func (ServerExtendedQueryParseComplete) ExtendedQuery()                    {}
func (t ServerExtendedQueryParseComplete) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryParseComplete) Server() pgproto3.BackendMessage { return t.T }

// Response to Bind.
type ServerExtendedQueryBindComplete FromServer[*pgproto3.BindComplete]

func (ServerExtendedQueryBindComplete) ExtendedQuery()                    {}
func (t ServerExtendedQueryBindComplete) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryBindComplete) Server() pgproto3.BackendMessage { return t.T }

// Response to Describe of prepared statement.
type ServerExtendedQueryParameterDescription FromServer[*pgproto3.ParameterDescription]

func (ServerExtendedQueryParameterDescription) ExtendedQuery()                    {}
func (t ServerExtendedQueryParameterDescription) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryParameterDescription) Server() pgproto3.BackendMessage { return t.T }

// Response to Describe of portal or statement that returns data.
type ServerExtendedQueryRowDescription FromServer[*pgproto3.RowDescription]

func (ServerExtendedQueryRowDescription) ExtendedQuery()                    {}
func (t ServerExtendedQueryRowDescription) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryRowDescription) Server() pgproto3.BackendMessage { return t.T }

// Response to Describe of portal or statement that doesn't return data.
type ServerExtendedQueryNoData FromServer[*pgproto3.NoData]

func (ServerExtendedQueryNoData) ExtendedQuery()                    {}
func (t ServerExtendedQueryNoData) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryNoData) Server() pgproto3.BackendMessage { return t.T }

// Response to Execute if there are additional rows / the execute did not
// complete during the Execute call, the client should call Execute again.
type ServerExtendedQueryPortalSuspended FromServer[*pgproto3.PortalSuspended]

func (ServerExtendedQueryPortalSuspended) ExtendedQuery()                    {}
func (t ServerExtendedQueryPortalSuspended) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryPortalSuspended) Server() pgproto3.BackendMessage { return t.T }

// Response to Close of prepared statement or portal.
type ServerExtendedQueryCloseComplete FromServer[*pgproto3.CloseComplete]

func (ServerExtendedQueryCloseComplete) ExtendedQuery()                    {}
func (t ServerExtendedQueryCloseComplete) PgwireMessage() pgproto3.Message { return t.T }
func (t ServerExtendedQueryCloseComplete) Server() pgproto3.BackendMessage { return t.T }

// ToServerExtendedQuery converts a pgproto3.BackendMessage to a ServerExtendedQuery if it matches one of the known types.
func ToServerExtendedQuery(msg pgproto3.BackendMessage) (ServerExtendedQuery, bool) {
	switch m := msg.(type) {
	case *pgproto3.ParseComplete:
		return ServerExtendedQueryParseComplete{m}, true
	case *pgproto3.BindComplete:
		return ServerExtendedQueryBindComplete{m}, true
	case *pgproto3.ParameterDescription:
		return ServerExtendedQueryParameterDescription{m}, true
	case *pgproto3.RowDescription:
		return ServerExtendedQueryRowDescription{m}, true
	case *pgproto3.NoData:
		return ServerExtendedQueryNoData{m}, true
	case *pgproto3.PortalSuspended:
		return ServerExtendedQueryPortalSuspended{m}, true
	case *pgproto3.CloseComplete:
		return ServerExtendedQueryCloseComplete{m}, true
	}
	return nil, false
}

// ServerExtendedQueryHandlers provides type-safe handlers for each ServerExtendedQuery variant.
type ServerExtendedQueryHandlers[T any] struct {
	ParseComplete        func(msg ServerExtendedQueryParseComplete) (T, error)
	BindComplete         func(msg ServerExtendedQueryBindComplete) (T, error)
	ParameterDescription func(msg ServerExtendedQueryParameterDescription) (T, error)
	RowDescription       func(msg ServerExtendedQueryRowDescription) (T, error)
	NoData               func(msg ServerExtendedQueryNoData) (T, error)
	PortalSuspended      func(msg ServerExtendedQueryPortalSuspended) (T, error)
	CloseComplete        func(msg ServerExtendedQueryCloseComplete) (T, error)
}

// HandleDefault dispatches to the appropriate handler, or calls defaultHandler if the handler is nil.
func (h ServerExtendedQueryHandlers[T]) HandleDefault(msg ServerExtendedQuery, defaultHandler func(msg ServerExtendedQuery) (T, error)) (r T, err error) {
	switch msg := msg.(type) {
	case ServerExtendedQueryParseComplete:
		if h.ParseComplete != nil {
			return h.ParseComplete(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryBindComplete:
		if h.BindComplete != nil {
			return h.BindComplete(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryParameterDescription:
		if h.ParameterDescription != nil {
			return h.ParameterDescription(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryRowDescription:
		if h.RowDescription != nil {
			return h.RowDescription(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryNoData:
		if h.NoData != nil {
			return h.NoData(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryPortalSuspended:
		if h.PortalSuspended != nil {
			return h.PortalSuspended(msg)
		} else {
			return defaultHandler(msg)
		}
	case ServerExtendedQueryCloseComplete:
		if h.CloseComplete != nil {
			return h.CloseComplete(msg)
		} else {
			return defaultHandler(msg)
		}
	}
	err = fmt.Errorf("unknown server extendedquery message: %T", msg)
	return
}

// Handle dispatches to the appropriate handler, or panics if the handler is nil.
func (h ServerExtendedQueryHandlers[T]) Handle(msg ServerExtendedQuery) (T, error) {
	return h.HandleDefault(msg, func(msg ServerExtendedQuery) (T, error) {
		panic(fmt.Sprintf("no handler defined for server extendedquery message: %T", msg))
	})
}
